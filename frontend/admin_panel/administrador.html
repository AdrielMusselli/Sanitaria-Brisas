<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Sanitaria Brisas</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-dark bg-primary ">
        <div class="container-fluid justify-content-center">
            <a href="../paginas/index.html" class="navbar-brand">
                <i class="fas fa-house me-2"></i>
                Sanitaria Brisas - Admin
            </a>
        </div>
    </nav>

    <div class="container my-4">
        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs mb-4">
            <li class="nav-item">
                <a class="nav-link active" href="#" data-section="productos">
                    <i class="fas fa-box me-2"></i>Productos
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="pedidos">
                    <i class="fas fa-receipt me-2"></i>Pedidos
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="reseñas">
                    <i class="fas fa-star me-2"></i>Reseñas
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-section="agregar">
                    <i class="fas fa-plus-circle me-2"></i>Agregar Producto
                </a>
            </li>
        </ul>

        <!-- Productos Section -->
        <section id="productos" class="content-section active">
            <h3 class="mb-3">Lista de Productos</h3>
            
            <div class="table-responsive">
                <table class="table table-striped" id="tablaProductos">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Producto</th>
                            <th>Categoría</th>
                            <th>Precio</th>
                            <th>Descripción</th>
                            <th>Stock</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Los productos se cargarán aquí desde la API -->
                    </tbody>
                </table>
            </div>
        </section>

 <!-- Pedidos Section -->
<section id="pedidos" class="content-section">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="mb-0">Lista de Pedidos</h3>

        <!-- Filtros alineados a la derecha -->
        <div class="d-flex gap-2">

            <select id="filtroEstado" class="form-select" style="max-width: 200px;">
                <option value="">Todos los estados</option>
                <option value="en proceso">En proceso</option>
                <option value="enviado">Enviado</option>
                <option value="entregado">Entregado</option>
                <option value="cancelado">Cancelado</option>
            </select>

            <input type="number" id="filtroUsuario" class="form-control" 
                   placeholder="Filtrar por ID de usuario" style="max-width: 220px;">

            <button class="btn btn-primary" onclick="filtrarPedidos()">Filtrar</button>
            <button class="btn btn-secondary" onclick="limpiarFiltros()">Limpiar</button>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-striped" id="tablaPedidos">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Usuario</th>
                    <th>Fecha</th>
                    <th>Estado</th>
                    <th>Dirección</th>
                    <th>Precio Total</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Los pedidos se cargarán aquí desde la API -->
            </tbody>
        </table>
    </div>
</section>

<section id="reseñas" class="content-section">
            <h3 class="mb-3">Reseñas</h3>
            
            <div class="table-responsive">
                <table class="table table-striped" id="tablaResenas">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Producto</th>
                            <th>Usuario</th>
                            <th>Calificación</th>
                            <th>Comentario</th>
                            <th>Fecha</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Las reseñas se cargarán aquí desde la API -->
                    </tbody>
                </table>
            </div>
</section>

        <!-- Agregar Producto Section -->
        <section id="agregar" class="content-section">
            <h3 class="mb-3">Agregar Nuevo Producto</h3>
            
            <form id="productoForm">
                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" required>
                </div>

                <div class="mb-3">
                    <label for="categoria" class="form-label">Categoría</label>
                    <select class="form-select" id="categoria" name="categoria" required>
                        <option value="">Seleccionar...</option>
                        <option value="Herramientas">Herramientas</option>
                        <option value="Construccion">Construccion</option>
                        <option value="Pinturas">Pinturas</option>
                        <option value="Techos">Techos</option>
                        <option value="Ofertas">Ofertas</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="precio" class="form-label">Precio</label>
                    <input type="number" class="form-control" id="precio" name="precio" step="0.01" required>
                </div>
                 <div class="mb-3">
                    <label for="stock" class="form-label">Stock</label>
                     <input type="number" class="form-control" id="stock" name="stock" required>
                </div>
                <div class="mb-3">
                    <label for="descripcion" class="form-label">Descripción</label>
                    <textarea class="form-control" id="descripcion" name="descripcion" rows="3" required></textarea>
                </div>

                <div class="mb-3">
                    <label for="imagenes" class="form-label">Imagen del Producto</label>
                    <div class="input-group">
                        <input type="file" class="form-control" id="imagenes" name="imagenes" accept="image/*">
                        <label class="input-group-text" for="imagenes">
                            <i class="fas fa-image"></i>
                        </label>
                    </div>
                    <div class="form-text">Formatos aceptados: JPG, PNG. Tamaño máximo: 2MB</div>
                    <div id="preview-container" class="mt-2 d-none">
                        <img id="image-preview" src="#" alt="Vista previa" class="img-thumbnail" style="max-height: 200px;">
                    </div>
                </div>

                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save me-2"></i>Guardar Producto
                </button>
            </form>
        </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/nav.js"></script>
    <script src="admin.js"></script>
</body>
</html>

<!-- Modal para ver detalles del pedido -->
<div class="modal fade" id="pedidoModal" tabindex="-1" aria-labelledby="pedidoModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <!-- Header -->
            <div class="modal-header">
                <h5 class="modal-title" id="pedidoModalLabel">Detalles del pedido</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Body -->
            <div class="modal-body">

                <!-- INFO PEDIDO -->
                <h6 class="mb-2">Información del pedido</h6>
                <p><strong>ID:</strong> <span id="modalPedidoId"></span></p>
                <p><strong>Fecha:</strong> <span id="modalPedidoFecha"></span></p>
                <p><strong>Estado:</strong> <span id="modalPedidoEstado"></span></p>
                <p><strong>Precio total:</strong> $<span id="modalPedidoPrecio"></span></p>
                <p><strong>Dirección de envío:</strong> <span id="modalPedidoDireccion"></span></p>

                <hr>

                <!-- INFO USUARIO -->
                <h6 class="mb-2">Información del usuario</h6>
                <p><strong>Nombre:</strong> <span id="modalUsuarioNombre"></span></p>
                <p><strong>Email:</strong> <span id="modalUsuarioEmail"></span></p>
                <p><strong>Teléfono:</strong> <span id="modalUsuarioTelefono"></span></p>

                <hr>

                <!-- PRODUCTOS DEL PEDIDO -->
                <h5 class="mt-3">Productos del pedido</h5>
                <div id="modalProductos" class="mt-2"></div>

            </div>

            <!-- Footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>

        </div>
    </div>
</div>

<!-- Modal Cambiar Estado -->
<div class="modal fade" id="modalEstado" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      
      <div class="modal-header">
        <h5 class="modal-title">Cambiar estado del pedido</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <input type="hidden" id="estadoPedidoId">

        <label for="nuevoEstado" class="form-label">Nuevo estado:</label>
        <select id="nuevoEstado" class="form-select">
          <option value="en proceso">En proceso</option>
          <option value="enviado">Enviado</option>
          <option value="entregado">Entregado</option>
          <option value="cancelado">Cancelado</option>
        </select>

      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button class="btn btn-primary" onclick="guardarEstado()">Guardar</button>
      </div>

    </div>
  </div>
</div>


